<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Art Donations Survey</title>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser/dist/email.min.js"></script>
  <style>
    body { font-family: fantasy; background: #fafafa; padding: 20px; }
    h1 { text-align: center; font-size: 32px; background: linear-gradient(90deg,#ffd6e0,#c8e7f5,#fff3b0); padding:12px; border-radius:16px; color:#333; }
    form { max-width: 800px; margin:auto; display:grid; gap:20px; }
    .bubble { padding:22px; border-radius:25px; font-size:18px; font-weight:500; box-shadow:2px 4px 10px rgba(0,0,0,0.1); }
    .pink { background:#ffe6eb; }
    .blue { background:#d8f0fa; }
    .purple { background:#ede0ff; }
    .yellow { background:#fff7d6; }
    .green { background:#e2f8e1; text-align:center; }
    .limegreen { background:#e0eac2; }
    label { display:block; margin-top:10px; font-weight:normal; }
    input, textarea { margin-top:5px; padding:8px; width:95%; border-radius:8px; border:1px solid #ccc; }
    button { margin:20px auto; display:block; background:#a8d5ba; color:#333; padding:12px 24px; font-size:18px; border:none; border-radius:12px; cursor:pointer; }
    button:hover { background:#90c7a5; }
  </style>
</head>
<body>
  <h1>Artnations</h1>
  <form id="surveyForm">
    <div class="bubble yellow">
      Contact Details:  
      <label>Name: <input type="text" name="user_name" required></label>
      <label>Email: <input type="email" name="user_email" required></label>
    </div>
    <div class="bubble pink">
      Would you like to donate any extra art supplies?  
      <label><input type="radio" name="donate" value="Yes" required> Yes</label>
      <label><input type="radio" name="donate" value="No" required> No</label>
    </div>
    <div class="bubble blue">
      What kind of art supplies are you able to donate?  
      <textarea name="supplies" rows="3" placeholder="E.g., paints, brushes, sketchbooks"></textarea>
    </div>
    <div class="bubble purple">
      Would you like to take extra sessions/classes for the kids you are donating supplies to?  
      <label><input type="radio" name="extra" value="Yes" required> Yes</label>
      <label><input type="radio" name="extra" value="No" required> No</label>
    </div>
    <div class="bubble limegreen">
      How often would you be available for volunteer work?  
      <label><input type="radio" name="availability" value="Once a week" required> Once a week</label>
      <label><input type="radio" name="availability" value="Twice a month" required> Twice a month</label>
      <label><input type="radio" name="availability" value="Occasionally" required> Occasionally</label>
    </div>
    <div class="bubble yellow">
      Would you prefer group volunteering or individual sessions?  
      <label><input type="radio" name="volunteering" value="Group" required> Group</label>
      <label><input type="radio" name="volunteering" value="Individual" required> Individual</label>
    </div>
    <div class="bubble green">Need More Help? üòä</div>
    <button type="submit">Submit</button>
  </form>

  <script>
    // Initialize EmailJS
    emailjs.init("qWjjNLV-PXNmtvima"); // Your public key

    const SHEETDB_URL = "https://sheetdb.io/api/v1/uk7lya3g7ab8w"; // Your SheetDB API

    const form = document.getElementById("surveyForm");
    form.addEventListener("submit", function(e) {
      e.preventDefault();
      const formData = new FormData(form);

      // Prepare data for SheetDB
      const dataObj = {
        data: [
          {
            Name: formData.get("user_name"),
            Email: formData.get("user_email"),
            Donate: formData.get("donate"),
            Supplies: formData.get("supplies"),
            Extra: formData.get("extra"),
            Availability: formData.get("availability"),
            Volunteering: formData.get("volunteering")
          }
        ]
      };

      // Submit to SheetDB
      fetch(SHEETDB_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(dataObj)
      })
      .then(res => {
        if (!res.ok) throw new Error("Failed to submit to SheetDB");
        alert("‚úÖ Your response has been recorded!");
        form.reset();

        // Send confirmation email to user
        emailjs.send("artnation_admin","template_51hjlc8", {
          user_name: formData.get("user_name"),
          user_email: formData.get("user_email"),
          name: formData.get("user_name"),
          email: formData.get("user_email"),
          title: "Art Donation Survey",
          message: `Donation: ${formData.get("donate")}\nSupplies: ${formData.get("supplies")}\nExtra Classes: ${formData.get("extra")}\nAvailability: ${formData.get("availability")}\nVolunteering: ${formData.get("volunteering")}`
        })
        .then(() => console.log("Confirmation email sent!"))
        .catch(err => console.warn("‚ö†Ô∏è EmailJS failed:", err));
      })
      .catch(err => alert("‚ö†Ô∏è Submission failed: " + err));
    });
  </script>
</body>
</html>
